package shop;

import java.util.ArrayList;
import java.util.List;

import com.kirill.org.Shop.APIResponse;
import com.kirill.org.Shop.Empty;
import com.kirill.org.Shop.OneResponse;
import com.kirill.org.Shop.Request;
import com.kirill.org.shopGrpc.shopImplBase;

import io.grpc.stub.StreamObserver;

public class ShopService extends shopImplBase {
	public static List<Item> items = new ArrayList<Item>(){{
        add(new Item(1, "OREL A5", 4));
        add(new Item(2, "HTC XC",5));
        add(new Item(3, "BlackBerry",8));
        add(new Item(4, "audi",9));
        add(new Item(5, "bmv",2));
    }};

	
	
	 @Override
	public void getall(Empty request, StreamObserver<APIResponse> responseObserver) {
		// TODO Auto-generated method stub
		super.getall(request, responseObserver);
	}



	@Override
	public void getOne(Request request, StreamObserver<OneResponse> responseObserver) {
		int id = request.getId();
		String description = request.getDescription();
		int count = request.getCount();
		
		APIResponse.Builder response = APIResponse.newBuilder();
		if(username.equals(password)) {
			
			 // return success message
			
			response.setResponseCode(0).setResponsemessage("SUCCESS");
			
		}
		else {
			response.setResponseCode(100).setResponsemessage("INVALID PASSWORD");
		}
		
		
		
		responseObserver.onNext(response.build());
		responseObserver.onCompleted();
	}



	private Item getItem(String id) {
	        return items.stream()
	                .filter(t -> Integer.parseInt(id)==t.getId())
	                .findFirst()
	                .orElse(null);
	    }

}
